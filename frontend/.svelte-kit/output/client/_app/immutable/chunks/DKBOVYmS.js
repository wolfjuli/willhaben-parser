import{T as ce,l as oe,W as j,y as M,m as k,z as de,o as _e,g as W,X as he,Y as me,Z,M as D,v as x,N as be,_ as ee,q as ae,$ as Ae,a0 as H,Q as re,I as V,U as $,a1 as B,a2 as F,a3 as Y,a4 as Ee,a5 as J,a6 as ke,a7 as Te,P as Ie,a8 as Se,A as we,a9 as Ce,w as xe,aa as ge,G as le,ab as Ne,ac as ye,i as Me}from"./B17x10Mu.js";import{l as ne}from"./CF65HRtN.js";import{b as De,p as fe}from"./f5cgzvLy.js";function Ye(e,r){return r}function He(e,r,a,f){for(var l=[],s=r.length,n=0;n<s;n++)Te(r[n].e,l,!0);var d=s>0&&l.length===0&&a!==null;if(d){var h=a.parentNode;Ie(h),h.append(a),f.clear(),w(e,r[0].prev,r[s-1].next)}Se(l,()=>{for(var v=0;v<s;v++){var c=r[v];d||(f.delete(c.k),w(e,c.prev,c.next)),we(c.e,!d)}})}function Pe(e,r,a,f,l,s=null){var n=e,d={items:new Map,first:null},h=(r&j)!==0;if(h){var v=e;n=k?M(de(v)):v.appendChild(ce())}k&&_e();var c=null,T=!1,i=he(()=>{var _=a();return ge(_)?_:_==null?[]:re(_)});oe(()=>{var _=W(i),t=_.length;if(T&&t===0)return;T=t===0;let I=!1;if(k){var b=n.data===me;b!==(t===0)&&(n=Z(),M(n),D(!1),I=!0)}if(k){for(var A=null,E,m=0;m<t;m++){if(x.nodeType===8&&x.data===be){n=x,I=!0,D(!1);break}var u=_[m],o=f(u,m);E=te(x,d,A,null,u,o,m,l,r,a),d.items.set(o,E),A=E}t>0&&M(Z())}k||Re(_,d,n,l,r,f,a),s!==null&&(t===0?c?ee(c):c=ae(()=>s(n)):c!==null&&Ae(c,()=>{c=null})),I&&D(!0),W(i)}),k&&(n=x)}function Re(e,r,a,f,l,s,n){var U,X,z,G;var d=(l&ke)!==0,h=(l&(B|Y))!==0,v=e.length,c=r.items,T=r.first,i=T,_,t=null,I,b=[],A=[],E,m,u,o;if(d)for(o=0;o<v;o+=1)E=e[o],m=s(E,o),u=c.get(m),u!==void 0&&((U=u.a)==null||U.measure(),(I??(I=new Set)).add(u));for(o=0;o<v;o+=1){if(E=e[o],m=s(E,o),u=c.get(m),u===void 0){var ue=i?i.e.nodes_start:a;t=te(ue,r,t,t===null?r.first:t.next,E,m,o,f,l,n),c.set(m,t),b=[],A=[],i=t.next;continue}if(h&&Oe(u,E,o,l),u.e.f&H&&(ee(u.e),d&&((X=u.a)==null||X.unfix(),(I??(I=new Set)).delete(u))),u!==i){if(_!==void 0&&_.has(u)){if(b.length<A.length){var g=A[0],S;t=g.prev;var P=b[0],N=b[b.length-1];for(S=0;S<b.length;S+=1)K(b[S],g,a);for(S=0;S<A.length;S+=1)_.delete(A[S]);w(r,P.prev,N.next),w(r,t,P),w(r,N,g),i=g,t=N,o-=1,b=[],A=[]}else _.delete(u),K(u,i,a),w(r,u.prev,u.next),w(r,u,t===null?r.first:t.next),w(r,t,u),t=u;continue}for(b=[],A=[];i!==null&&i.k!==m;)i.e.f&H||(_??(_=new Set)).add(i),A.push(i),i=i.next;if(i===null)continue;u=i}b.push(u),t=u,i=u.next}if(i!==null||_!==void 0){for(var C=_===void 0?[]:re(_);i!==null;)i.e.f&H||C.push(i),i=i.next;var y=C.length;if(y>0){var ie=l&j&&v===0?a:null;if(d){for(o=0;o<y;o+=1)(z=C[o].a)==null||z.measure();for(o=0;o<y;o+=1)(G=C[o].a)==null||G.fix()}He(r,C,ie,c)}}d&&V(()=>{var Q;if(I!==void 0)for(u of I)(Q=u.a)==null||Q.apply()}),$.first=r.first&&r.first.e,$.last=t&&t.e}function Oe(e,r,a,f){f&B&&F(e.v,r),f&Y?F(e.i,a):e.i=a}function te(e,r,a,f,l,s,n,d,h,v){var c=(h&B)!==0,T=(h&Ce)===0,i=c?T?Ee(l):J(l):l,_=h&Y?J(n):n,t={i:_,v:i,k:s,a:null,e:null,prev:a,next:f};try{return t.e=ae(()=>d(e,i,_,v),k),t.e.prev=a&&a.e,t.e.next=f&&f.e,a===null?r.first=t:(a.next=t,a.e.next=t.e),f!==null&&(f.prev=t,f.e.prev=t.e),t}finally{}}function K(e,r,a){for(var f=e.next?e.next.e.nodes_start:a,l=r?r.e.nodes_start:a,s=e.e.nodes_start;s!==f;){var n=xe(s);l.before(s),s=n}}function w(e,r,a){r===null?e.first=a:(r.next=a,r.e.next=a&&a.e),a!==null&&(a.prev=r,a.e.prev=r&&r.e)}function Ue(e,r,a=r){var f=ye();ne(e,"input",l=>{var s=l?e.defaultValue:e.value;if(s=O(e)?L(s):s,a(s),f&&s!==(s=r())){var n=e.selectionStart,d=e.selectionEnd;e.value=s??"",d!==null&&(e.selectionStart=n,e.selectionEnd=Math.min(d,e.value.length))}}),(k&&e.defaultValue!==e.value||Me(r)==null&&e.value)&&a(O(e)?L(e.value):e.value),le(()=>{var l=r();O(e)&&l===L(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}const R=new Set;function Xe(e,r,a,f,l=f){var s=a.getAttribute("type")==="checkbox",n=e;let d=!1;if(r!==null)for(var h of r)n=n[h]??(n[h]=[]);n.push(a),ne(a,"change",()=>{var v=a.__value;s&&(v=p(n,v,a.checked)),l(v)},()=>l(s?[]:null)),le(()=>{var v=f();if(k&&a.defaultChecked!==a.checked){d=!0;return}s?(v=v||[],a.checked=v.includes(a.__value)):a.checked=De(a.__value,v)}),Ne(()=>{var v=n.indexOf(a);v!==-1&&n.splice(v,1)}),R.has(n)||(R.add(n),V(()=>{n.sort((v,c)=>v.compareDocumentPosition(c)===4?-1:1),R.delete(n)})),V(()=>{if(d){var v;if(s)v=p(n,v,a.checked);else{var c=n.find(T=>T.checked);v=c==null?void 0:c.__value}l(v)}})}function p(e,r,a){for(var f=new Set,l=0;l<e.length;l+=1)e[l].checked&&f.add(e[l].__value);return a||f.delete(r),Array.from(f)}function O(e){var r=e.type;return r==="number"||r==="range"}function L(e){return e===""?null:+e}const se=fe({value:void 0}),q=fe({value:void 0});function ve(e){return{...e,label:e.label??e.normalized}}fetch("/api/rest/v1/attributes").then(e=>e.json()).then(e=>se.value=e.map(ve));fetch("/api/rest/v1/custom_attributes").then(e=>e.json()).then(e=>q.value=e.map(ve));function Le(){var a,f;const e=((a=q.value)==null?void 0:a.map(l=>l.normalized))??[];return{value:[...((f=se.value)==null?void 0:f.filter(l=>!e.find(s=>s===l.normalized)))??[],...q.value??[]]}}function ze(e){return(e==null?void 0:e.map(r=>{var a;return(a=Le().value)==null?void 0:a.find(f=>f.normalized===r)}).filter(Boolean))??[]}export{q as C,Xe as a,Ue as b,Pe as e,ze as f,Ye as i,Le as m};
